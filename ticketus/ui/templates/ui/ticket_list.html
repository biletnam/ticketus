{% extends "base.html" %}

{% load staticfiles %}

{% block extra_css %}
<link href="{% static "css/ticket.css" %}" rel="stylesheet">
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    $('table#tickets tr.link').click(function() {
        window.location = $(this).find('a').attr('href');
    }).hover( function() {
        $(this).toggleClass('hover');
    });
});
</script>
{% endblock %}

{% block jumbotron_wrapper %}
{% endblock %}

{% block body %}

<table class="table table-hover" id="tickets">
    <thead>
        <th>ID</th>
        <th>Title</th>
        <th>Created by</th>
        <th>Created at</th>
    </thead>
    <tbody>
    {% for ticket in tickets %}
        <tr class="link">
            <td><a href="{{ ticket.get_absolute_url }}">{{ ticket.id }}</a></td>
            <td>{{ ticket.title }} <span class="badge">{{ ticket.comment_set.count }}</span></td>
            <td>{{ ticket.requester }}</td>
            <td>{{ ticket.created_datetime }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}
